[[
  {
    "name": "vertexai.request",
    "service": "",
    "resource": "GenerativeModel.generate_content",
    "trace_id": 0,
    "span_id": 1,
    "parent_id": 0,
    "type": "",
    "error": 1,
    "meta": {
      "_dd.p.dm": "-0",
      "_dd.p.tid": "672a962e00000000",
      "error.message": "400 Unable to submit request because the fileUri parameter must be a Cloud Storage or HTTP(S) URI but the entered value was '/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/tests/contrib/vertexai'. Update the fileUri value and try again. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini",
      "error.stack": "Traceback (most recent call last):\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/google/api_core/grpc_helpers.py\", line 76, in error_remapped_callable\n    return callable_(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/grpc/_channel.py\", line 1181, in __call__\n    return _end_unary_response_blocking(state, call, False, None)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/grpc/_channel.py\", line 1006, in _end_unary_response_blocking\n    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ngrpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:\n\tstatus = StatusCode.INVALID_ARGUMENT\n\tdetails = \"Unable to submit request because the fileUri parameter must be a Cloud Storage or HTTP(S) URI but the entered value was '/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/tests/contrib/vertexai'. Update the fileUri value and try again. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer ipv4:142.251.41.10:443 {grpc_message:\"Unable to submit request because the fileUri parameter must be a Cloud Storage or HTTP(S) URI but the entered value was \\'/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/tests/contrib/vertexai\\'. Update the fileUri value and try again. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini\", grpc_status:3, created_time:\"2024-11-05T17:03:27.26831-05:00\"}\"\n>\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/ddtrace/contrib/internal/vertexai/patch.py\", line 49, in traced_generate\n    generations = func(*args, **kwargs)\n                  ^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py\", line 654, in generate_content\n    return self._generate_content(\n           ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/vertexai/generative_models/_generative_models.py\", line 779, in _generate_content\n    gapic_response = self._prediction_client.generate_content(request=request)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/google/cloud/aiplatform_v1/services/prediction_service/client.py\", line 2159, in generate_content\n    response = rpc(\n               ^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/google/api_core/gapic_v1/method.py\", line 131, in __call__\n    return wrapped_func(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/.riot/venv_py3127_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_vertexai_google-generativeai_pillow/lib/python3.12/site-packages/google/api_core/grpc_helpers.py\", line 78, in error_remapped_callable\n    raise exceptions.from_grpc_error(exc) from exc\ngoogle.api_core.exceptions.InvalidArgument: 400 Unable to submit request because the fileUri parameter must be a Cloud Storage or HTTP(S) URI but the entered value was '/Users/nicole.cybul/go/src/github.com/DataDog/dd-trace-py/tests/contrib/vertexai'. Update the fileUri value and try again. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini\n",
      "error.type": "google.api_core.exceptions.InvalidArgument",
      "language": "python",
      "runtime-id": "855386d7085e497faa1ee3f45fec6b74",
      "vertexai.request.contents.0.text": "[Non-text content object: file_data {\\n  mime_type: \"image/jpeg\"\\n  file_uri: \"/Users/nicole.cybul/go/src/github.com/DataDog/dd-...",
      "vertexai.request.contents.1.text": "Identify the breed of dog in the image.",
      "vertexai.request.generation_config.max_output_tokens": "30",
      "vertexai.request.generation_config.stop_sequences": "['x']",
      "vertexai.request.generation_config.temperature": "0.0",
      "vertexai.request.model": "gemini-1.5-flash",
      "vertexai.request.provider": "google"
    },
    "metrics": {
      "_dd.measured": 1,
      "_dd.top_level": 1,
      "_dd.tracer_kr": 1.0,
      "_sampling_priority_v1": 1,
      "process_id": 69035
    },
    "duration": 294215000,
    "start": 1730844206989759000
  }]]
