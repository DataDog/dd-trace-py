[[
  {
    "name": "mcp.request",
    "service": "tests.contrib.mcp",
    "resource": "mcp.session",
    "trace_id": 0,
    "span_id": 1,
    "parent_id": 0,
    "type": "",
    "error": 0,
    "meta": {
      "_dd.p.dm": "-0",
      "_dd.p.tid": "68dab5a300000000",
      "language": "python",
      "runtime-id": "c88ca6d62a4e414c97809749af27a8b1"
    },
    "metrics": {
      "_dd.measured": 1,
      "_dd.top_level": 1,
      "_dd.tracer_kr": 1.0,
      "_sampling_priority_v1": 1,
      "process_id": 10527
    },
    "duration": 3324000,
    "start": 1759163811625614000
  },
     {
       "name": "mcp.request",
       "service": "tests.contrib.mcp",
       "resource": "mcp.client.session.initialize",
       "trace_id": 0,
       "span_id": 2,
       "parent_id": 1,
       "type": "",
       "error": 0,
       "metrics": {
         "_dd.measured": 1
       },
       "duration": 889000,
       "start": 1759163811625717000
     },
     {
       "name": "mcp.request",
       "service": "tests.contrib.mcp",
       "resource": "client_tool_call",
       "trace_id": 0,
       "span_id": 3,
       "parent_id": 1,
       "type": "",
       "error": 0,
       "meta": {
         "_dd.p.tid": "68dab5a300000000"
       },
       "metrics": {
         "_dd.measured": 1
       },
       "duration": 2067000,
       "start": 1759163811626662000
     },
        {
          "name": "mcp.request",
          "service": "tests.contrib.mcp",
          "resource": "server_tool_call",
          "trace_id": 0,
          "span_id": 4,
          "parent_id": 3,
          "type": "",
          "error": 1,
          "meta": {
            "_dd.p.tid": "68dab5a300000000",
            "error.message": "Error executing tool failing_tool: Tool execution failed",
            "error.stack": "Traceback (most recent call last):\n  File \"/Users/sam.brenner/dd/dd-trace-py/.riot/venv_py31013_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_pytest-asyncio_mcp~1100/lib/python3.10/site-packages/mcp/server/fastmcp/tools/base.py\", line 98, in run\n    result = await self.fn_metadata.call_fn_with_arg_validation(\n  File \"/Users/sam.brenner/dd/dd-trace-py/.riot/venv_py31013_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_pytest-asyncio_mcp~1100/lib/python3.10/site-packages/mcp/server/fastmcp/utilities/func_metadata.py\", line 86, in call_fn_with_arg_validation\n    return fn(**arguments_parsed_dict)\n  File \"/Users/sam.brenner/dd/dd-trace-py/tests/contrib/mcp/conftest.py\", line 101, in failing_tool\n    raise ValueError(\"Tool execution failed\")\nValueError: Tool execution failed\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/sam.brenner/dd/dd-trace-py/ddtrace/contrib/internal/mcp/patch.py\", line 143, in traced_tool_manager_call_tool\n    result = await func(*args, **kwargs)\n  File \"/Users/sam.brenner/dd/dd-trace-py/.riot/venv_py31013_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_pytest-asyncio_mcp~1100/lib/python3.10/site-packages/mcp/server/fastmcp/tools/tool_manager.py\", line 83, in call_tool\n    return await tool.run(arguments, context=context, convert_result=convert_result)\n  File \"/Users/sam.brenner/dd/dd-trace-py/.riot/venv_py31013_mock_pytest_pytest-mock_coverage_pytest-cov_opentracing_hypothesis6451_pytest-asyncio_mcp~1100/lib/python3.10/site-packages/mcp/server/fastmcp/tools/base.py\", line 110, in run\n    raise ToolError(f\"Error executing tool {self.name}: {e}\") from e\nmcp.server.fastmcp.exceptions.ToolError: Error executing tool failing_tool: Tool execution failed\n",
            "error.type": "mcp.server.fastmcp.exceptions.ToolError",
            "runtime-id": "c88ca6d62a4e414c97809749af27a8b1"
          },
          "metrics": {
            "_dd.measured": 1,
            "_dd.top_level": 1,
            "process_id": 10527
          },
          "duration": 711000,
          "start": 1759163811627659000
        }]]
