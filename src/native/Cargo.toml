[package]
name = "ddtrace-native"
version = "0.1.0"
edition = "2021"

[profile.release]
lto = true
strip = "debuginfo"
opt-level = 3

[dependencies]
anyhow = "1.0"
pyo3 = { version = "0.22.3", features = ["extension-module"] }
ddcommon = { git = "https://github.com/DataDog/libdatadog", rev = "v16.0.3" }
datadog-crashtracker = { git = "https://github.com/DataDog/libdatadog", rev = "v16.0.3" }
datadog-ddsketch = { git = "https://github.com/DataDog/libdatadog", rev = "v16.0.3" }
datadog-library-config = { git = "https://github.com/DataDog/libdatadog", rev = "v16.0.3" }

[build-dependencies]
pyo3-build-config = "0.21.2"

[lib]
name = "_native"
path = "lib.rs"
crate-type = ["cdylib"]

[[bin]]
name = "crashtracker_exe"
path = "bin/crashtracker_exe.rs"


[net]
# Use git binary from the system instead of the built-in git client
# "Setting this to true can be helpful if you have special authentication requirements that Cargo does not support."
git-fetch-with-cli = true
