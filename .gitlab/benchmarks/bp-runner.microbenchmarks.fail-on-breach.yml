# Thresholds set based on guidance in https://datadoghq.atlassian.net/wiki/spaces/APMINT/pages/5070193198/How+to+set+up+pre-release+performance+quality+gates#How-to-choose-thresholds-for-pre-release-gates%3F

experiments:
  - name: Run SLO breach check
    steps:
      - name: SLO breach check
        run: fail_on_breach
        warning_range: 7
        scenarios:
          # Flask Simple
          - name: flasksimple-tracer
            thresholds:
              - execution_time < 3.65ms
              - max_rss_usage < 52.5MB
          - name: flasksimple-profiler
            thresholds:
              - execution_time < 2.10ms
              - max_rss_usage < 43.8MB
          - name: flasksimple-debugger
            thresholds:
              - execution_time < 2ms
              - max_rss_usage < 42.5MB
          - name: flasksimple-iast-get
            thresholds:
              - execution_time < 2ms
              - max_rss_usage < 44.75MB
          - name: flasksimple-appsec-get
            thresholds:
              - execution_time < 4.75ms
              - max_rss_usage < 62.10MB
          - name: flasksimple-appsec-post
            thresholds:
              - execution_time < 6.40ms
              - max_rss_usage < 62.40MB
          - name: flasksimple-appsec-telemetry
            thresholds:
              - execution_time < 4.75ms
              - max_rss_usage < 62.4MB
