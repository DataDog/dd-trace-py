run_test:
  description: "Run tests matching a pattern"
  stage: test
  variables:
    PATTERN: ""
    SNAPSHOT: "false"
    DOCKER_SERVICES: ""
  script:
    - git checkout
    - setup_riot
    - >
      ./scripts/run-test-suite "$PATTERN" $CI_PIPELINE_SOURCE
  rules:
    - if: '$CI_PIPELINE_SOURCE == "merge_request_event"'
  retry:
    max: 2
