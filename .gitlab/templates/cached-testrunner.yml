.cached_testrunner:
  extends: .testrunner
  variables:
    PIP_CACHE_DIR: '${{CI_PROJECT_DIR}}/.cache/pip'
  before_script: |
    ulimit -c unlimited
    pyenv global 3.12 3.9 3.10 3.11 3.13 3.14
    export _CI_DD_AGENT_URL=http://${{HOST_IP}}:8126/
    set -e -o pipefail
  cache:
    # Share pip between jobs of the same Python version
    - key: v5-build_base_venvs-${{PYTHON_VERSION}}-cache-{current_month}
      paths:
        - .cache
    - key: v5-build_base_venvs-${{PYTHON_VERSION}}-ext-{current_month}
      paths:
        - .ext_cache
    - key: v5-build_base_venvs-${{PYTHON_VERSION}}-download-cache-{current_month}
      paths:
        - .download_cache
