variables:
  TESTRUNNER_IMAGE: registry.ddbuild.io/images/dd-trace-py:v71878370-6775f6a-testrunner-2025.07.15@sha256:fdf501bfb7a626b4b54602f2aa897d4e301f5d1f6afc7938788c6e2c1391f9c3

.testrunner:
  image: ${TESTRUNNER_IMAGE}
  # DEV: we have a larger pool of amd64 runners, prefer that over arm64
  tags: [ "arch:amd64" ]
  timeout: 20m
  before_script:
    - ulimit -c unlimited
    - git config --global --add safe.directory ${CI_PROJECT_DIR}
    - pyenv global 3.12 3.8 3.9 3.10 3.11 3.13
    - export _CI_DD_AGENT_URL=http://${HOST_IP}:8126/
  retry: 2
  artifacts:
    reports:
      junit: test-results/junit*.xml
