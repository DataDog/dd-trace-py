algoliasearch:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "algoliasearch"

asgi:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "asgi$"

bottle:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "bottle"

cherrypy:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "cherrypy"

dogpile_cache:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "dogpile_cache"

elasticsearch:
  extends: .test_base_riot_snapshot
  parallel: 17
  services:
    - !reference [.test_base_riot_snapshot, services]
    - name: registry.ddbuild.io/images/mirror/library/elasticsearch:7.17.23
      alias: elasticsearch
      variables:
        discovery.type: single-node
        xpack.security.enabled: false
    - name: registry.ddbuild.io/images/mirror/opensearchproject/opensearch:1.3.13
      alias: opensearch
      variables:
        DISABLE_SECURITY_PLUGIN: true
        discovery.type: single-node
  variables:
    SUITE_NAME: "elasticsearch"

falcon:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "falcon"

fastapi:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "fastapi"

aredis:
  extends: .test_base_riot_snapshot
  services:
    - !reference [.test_base_riot_snapshot, services]
    - !reference [.services, redis]
  variables:
    SUITE_NAME: "aredis$"

yaaredis:
  extends: .test_base_riot_snapshot
  services:
    - !reference [.test_base_riot_snapshot, services]
    - !reference [.services, redis]
  variables:
    SUITE_NAME: "yaaredis$"

redis:
  extends: .test_base_riot_snapshot
  services:
    - !reference [.test_base_riot_snapshot, services]
    - !reference [.services, redis]
    - !reference [.services, rediscluster]
  parallel: 5
  variables:
    SUITE_NAME: "^redis$"

rediscluster:
  extends: .test_base_riot_snapshot
  services:
    - !reference [.test_base_riot_snapshot, services]
    - !reference [.services, redis]
    - !reference [.services, rediscluster]
  variables:
    SUITE_NAME: "rediscluster"

rq:
  extends: .test_base_riot_snapshot
  services:
    - !reference [.test_base_riot_snapshot, services]
    - !reference [.services, redis]
  variables:
    SUITE_NAME: "rq"
  parallel: 2

gevent:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "gevent"

graphene:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "graphene"

graphql:
  extends: .test_base_riot_snapshot
  parallel: 6
  variables:
    SUITE_NAME: "graphql"

grpc:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "grpc"

gunicorn:
  extends: .test_base_riot_snapshot
  parallel: 12
  variables:
    SUITE_NAME: "gunicorn"

jinja2:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "jinja2"

mako:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "mako"

molten:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "molten"

pynamodb:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "pynamodb"

pyodbc:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "pyodbc"

pyramid:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "pyramid"
  before_script:
    - !reference [.test_base_riot_snapshot, before_script]
    # This is because in the riotfile we specify a path to tests/contrib/pyramid/pserve_app
    # in the lockfile it gets replaced with the absolute path of /root/project/tests/.../pserve_app
    - ln -s "${CI_PROJECT_DIR}" "/root/project"

sanic:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "sanic"

snowflake:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "snowflake"

starlette:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "starlette"

structlog:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "structlog"

tornado:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "tornado"

wsgi:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "wsgi"
