elasticsearch:
  extends: .test_base_riot_snapshot
  parallel: 17
  services:
    - !reference [.test_base_riot_snapshot, services]
    - name: registry.ddbuild.io/images/mirror/library/elasticsearch:7.17.23
      alias: elasticsearch
      variables:
        discovery.type: single-node
        xpack.security.enabled: false
    - name: registry.ddbuild.io/images/mirror/opensearchproject/opensearch:1.3.13
      alias: opensearch
      variables:
        DISABLE_SECURITY_PLUGIN: true
        discovery.type: single-node
  variables:
    SUITE_NAME: "elasticsearch"

fastapi:
  extends: .test_base_riot_snapshot
  variables:
    SUITE_NAME: "fastapi"

flask:
  extends: .test_base_riot_snapshot
  parallel: 14
  services:
    - !references [.test_base_riot_snapshot, services]
    - name: registry.ddbuild.io/images/mirror/library/memcached:1.5-alpine
      alias: memcached
    - name: registry.ddbuild.io/images/mirror/redis:7.0.14-alpine
      alias: redis
  variables:
    SUITE_NAME: "flask"
    TEST_MEMCACHED_HOST: "memcached"
    TEST_REDIS_HOST: "redis"
