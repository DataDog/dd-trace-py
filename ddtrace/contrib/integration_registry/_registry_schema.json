{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Datadog Python Integration Registry Schema (Simplified)",
  "description": "Schema matching the fields within registry.yaml.",
  "type": "object",
  "properties": {
    "integrations": {
      "description": "List of all Datadog integration definitions.",
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/definitions/integration"
      }
    }
  },
  "required": [
    "integrations"
  ],
  "additionalProperties": false,
  "definitions": {
    "integration": {
      "type": "object",
      "description": "Schema for a single integration definition (simplified state).",
      "properties": {
        "integration_name": {
          "description": "Canonical integration name used within ddtrace (lowercase, snake_case).",
          "type": "string",
          "pattern": "^[a-z0-9_]+$"
        },
        "is_external_package": {
          "description": "True if this instruments an external PyPI package, False for stdlib/internal/testing.",
          "type": "boolean"
        },
        "dependency_name": {
          "description": "Optional: List of primary PyPI package names instrumented (present only if is_external_package=true and dependencies were identified).",
          "type": "array",
          "items": { "type": "string" },
          "minItems": 1
        },
        "is_tested": {
          "description": "False if this integration is not tested by the test suite. Not required if is_external_package=false or tested version fields exist.",
          "type": "boolean"
        },
        "tested_version_min": {
          "description": "Optional: Minimum supported version from supported_versions_table.csv (present only if is_external_package=true and version info found).",
          "type": "string"
        },
        "tested_version_max": {
          "description": "Optional: Maximum supported version from supported_versions_table.csv (present only if is_external_package=true and version info found).",
          "type": "string"
        }
      },
      "required": [
        "integration_name",
        "is_external_package"
      ],
      "additionalProperties": false
    }
  }
}