version: 2
build:
  os: ubuntu-22.04
  tools:
    python: "3.10"
    rust: "1.86"
  commands:
    - RUST_VERSION=`rustc --version | cut -d' ' -f2`
    - export PATH="/home/docs/.asdf/installs/rust/$RUST_VERSION/bin:$PATH"
    - git fetch --unshallow || true
    - curl -L https://github.com/pypa/hatch/releases/download/hatch-v1.12.0/hatch-x86_64-unknown-linux-gnu.tar.gz | tar zx
    - install -t $HOME/.asdf/bin hatch
    - hatch -q
    - hatch -v run docs:sphinx-build -W -b html docs docs/_build/html
    - mv docs/_build $READTHEDOCS_OUTPUT
