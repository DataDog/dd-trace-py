version: 2
build:
  os: ubuntu-22.04
  tools:
    python: "3.10"
    rust: "1.86"
  commands:
    - cargo install --force --root /home/docs/.asdf --git https://github.com/DataDog/libdatadog --bin dedup_headers tools
    - git fetch --unshallow || true
    - pip install riot
    - riot -v run --pass-env build_docs
    - mv docs/_build $READTHEDOCS_OUTPUT
